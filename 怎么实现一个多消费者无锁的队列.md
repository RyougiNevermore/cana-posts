---
title: 怎么实现一个多消费者无锁的队列
date: 2017-07-12 03:45:34
description:
featured_image:
issue: https://github.com/RyougiNevermore/ryouginevermore.github.io/issues/5
tags:
 - 简述
 - 无锁
 - 队列
---

由带锁的多线程访问的单个生产者不会解决你的问题，因为它只是转移到您自己的程序从干扰侧锁定。

解决你的问题从您需要的事件模型的类型各不相同。即你需要的事件按时间顺序; 消耗吗合并;或任何特殊的要求。
既然你要处理干扰和多生产者，这听起来非常像外汇交易系统:-)
不过，根据我的经验，假定你需要按时间顺序排列顺序每个生产者但不在乎关于混合生产者之间的事件，我会推荐你做合并线程队列。

结构是

- 每个生产者生产数据并放入其自己命名的队列
- 工作线程不断对队列进行检查。为每个队列中删除一个或多个项目并把它放到你单个生产者干扰单个生产者。

请注意，在上述情况中，

- 每个生产者队列是一个单个生产者单个消费者队列。
- 干扰是单个生产者多消费者干扰。
- 取决于您的需要，以避免运行线程，如果线程检查，比如说 100 运行所有队列都为空，它可以设置一些变量去 wait 和事件生产者可以sleep 一个永远看到它的时候等待。

